# 구현 계획 (Implementation Plan)

- [x] 1. 프로젝트 구조 및 기본 설정




  - 프로젝트 디렉토리 구조 생성 (agents, tools, models, workflows, utils 등)
  - 필요한 의존성 설치 (LangChain, LangGraph, Streamlit, Tavily 등)
  - 기본 설정 파일 및 환경 변수 구성 (.env, config.py)
  - LangSmith 모니터링 설정
  - _요구사항: 5.1, 5.4, 7.1_

- [x] 2. 핵심 데이터 모델 구현
  - [x] 2.1 연구 관련 데이터 모델 작성









    - ResearchState, ResearchData, AnalysisResult, SynthesisResult 클래스 구현
    - 데이터 검증 및 직렬화 기능 구현 (Pydantic 사용)
    - _요구사항: 3.1, 3.2_

  - [x] 2.2 검색 및 대화 데이터 모델 작성
    - [x] 2.2.1 SearchResult 클래스 구현
      - 검색 결과 데이터 모델 정의
      - 데이터 타입 검증 및 변환 기능 구현
      - _요구사항: 4.3, 6.1_
    
    - [x] 2.2.2 SearchResult 테스트 작성
      - 기본 생성 및 유효성 검사 테스트
      - 메서드 기능 테스트
      - _요구사항: 4.3, 6.1_
    
    - [x] 2.2.3 ConversationMessage 클래스 구현
      - 대화 메시지 데이터 모델 정의
      - 데이터 타입 검증 및 변환 기능 구현
      - _요구사항: 4.3, 6.1_
    
    - [x] 2.2.4 ConversationMessage 테스트 작성
      - 기본 생성 및 유효성 검사 테스트
      - 메서드 기능 테스트
      - _요구사항: 4.3, 6.1_
    
    - [x] 2.2.5 ConversationHistory 클래스 구현
      - 대화 기록 관리 기능 구현
      - 메시지 추가, 조회, 필터링 기능 구현
      - _요구사항: 4.3, 6.1_
    
    - [x] 2.2.6 ConversationHistory 테스트 작성
      - 메시지 추가 및 관리 기능 테스트
      - 메시지 조회 및 필터링 기능 테스트
      - _요구사항: 4.3, 6.1_

- [ ] 3. 상태 관리 시스템 구현
  - [-] 3.1 상태 관리자 구현



    - [-] 3.1.1 StateManager 클래스 기본 구조 작성

      - 클래스 정의 및 기본 속성 설정
      - 상태 저장을 위한 데이터 구조 정의
      - _요구사항: 3.2, 3.4_
    
    - [ ] 3.1.2 상태 업데이트 기능 구현
      - 상태 변경 메서드 구현
      - 상태 검증 및 유효성 검사 기능
      - _요구사항: 3.2, 3.4_
    
    - [ ] 3.1.3 컨텍스트 관리 기능 구현
      - 컨텍스트 저장 및 조회 기능
      - 컨텍스트 병합 및 업데이트 로직
      - _요구사항: 3.2, 3.4_
    
    - [ ] 3.1.4 StateManager 테스트 작성
      - 상태 관리 기능 단위 테스트
      - 컨텍스트 관리 기능 테스트
      - 오류 상황 처리 테스트
      - _요구사항: 3.2, 3.4_

  - [ ] 3.2 대화 메모리 시스템 구현
    - [ ] 3.2.1 ConversationMemory 클래스 기본 구조 작성
      - 클래스 정의 및 기본 속성 설정
      - 메모리 저장을 위한 데이터 구조 정의
      - _요구사항: 4.3_
    
    - [ ] 3.2.2 메모리 기반 대화 기록 저장 기능 구현
      - 대화 기록 저장 메서드 구현
      - 메모리 크기 제한 및 관리 로직
      - _요구사항: 4.3_
    
    - [ ] 3.2.3 대화 기록 조회 기능 구현
      - 대화 기록 검색 및 필터링 기능
      - 시간 범위별 조회 기능
      - _요구사항: 4.3_
    
    - [ ] 3.2.4 컨텍스트 윈도우 관리 구현
      - 최근 10개 메시지 관리 로직
      - 윈도우 크기 동적 조정 기능
      - _요구사항: 4.3_
    
    - [ ] 3.2.5 ConversationMemory 테스트 작성
      - 메모리 저장 및 조회 기능 테스트
      - 컨텍스트 윈도우 관리 테스트
      - 메모리 제한 및 정리 기능 테스트
      - _요구사항: 4.3_

- [ ] 4. 검색 도구 구현
  - [ ] 4.1 Tavily 검색 도구 구현
    - [ ] 4.1.1 TavilySearchTool 클래스 기본 구조 작성
      - 클래스 정의 및 기본 속성 설정
      - Tavily API 클라이언트 초기화
      - _요구사항: 2.2, 2.3_
    
    - [ ] 4.1.2 Tavily API 연동 기능 구현
      - API 호출 메서드 구현
      - 인증 및 요청 헤더 설정
      - _요구사항: 2.2, 2.3_
    
    - [ ] 4.1.3 검색 기능 구현
      - 검색 쿼리 처리 및 실행
      - 검색 옵션 및 필터 적용
      - _요구사항: 2.2, 2.3_
    
    - [ ] 4.1.4 검색 결과 파싱 및 구조화 기능 구현
      - API 응답 데이터 파싱
      - SearchResult 객체로 변환
      - _요구사항: 2.2, 2.3_
    
    - [ ] 4.1.5 TavilySearchTool 테스트 작성
      - API 연동 기능 테스트
      - 검색 및 파싱 기능 테스트
      - 오류 처리 테스트
      - _요구사항: 2.2, 2.3_

  - [ ] 4.2 데이터 처리 유틸리티 구현
    - [ ] 4.2.1 DataProcessor 클래스 기본 구조 작성
      - 클래스 정의 및 기본 속성 설정
      - 처리 파이프라인 구조 정의
      - _요구사항: 2.3, 2.5_
    
    - [ ] 4.2.2 텍스트 전처리 기능 구현
      - 텍스트 정제 및 정규화
      - 특수 문자 및 HTML 태그 제거
      - _요구사항: 2.3, 2.5_
    
    - [ ] 4.2.3 중복 제거 기능 구현
      - 중복 검색 결과 탐지
      - 유사도 기반 중복 제거
      - _요구사항: 2.3, 2.5_
    
    - [ ] 4.2.4 데이터 정규화 기능 구현
      - 데이터 형식 통일
      - 메타데이터 표준화
      - _요구사항: 2.3, 2.5_
    
    - [ ] 4.2.5 DataProcessor 테스트 작성
      - 텍스트 전처리 기능 테스트
      - 중복 제거 기능 테스트
      - 데이터 정규화 기능 테스트
      - _요구사항: 2.3, 2.5_

- [ ] 5. 개별 에이전트 구현
  - [ ] 5.1 연구 에이전트 구현
    - [ ] 5.1.1 ResearchAgent 클래스 기본 구조 작성
      - 클래스 정의 및 기본 속성 설정
      - 에이전트 초기화 및 설정 로직
      - _요구사항: 1.2, 2.1, 2.2_
    
    - [ ] 5.1.2 Tavily API 정보 수집 기능 구현
      - 검색 쿼리 생성 및 실행
      - 검색 결과 수집 및 처리
      - _요구사항: 1.2, 2.1, 2.2_
    
    - [ ] 5.1.3 소스 신뢰성 평가 기능 구현
      - 소스 도메인 신뢰도 평가
      - 콘텐츠 품질 평가 로직
      - _요구사항: 1.2, 2.1, 2.2_
    
    - [ ] 5.1.4 정보 구조화 기능 구현
      - 수집된 정보 분류 및 정리
      - 구조화된 데이터 형태로 변환
      - _요구사항: 1.2, 2.1, 2.2_
    
    - [ ] 5.1.5 ResearchAgent 테스트 작성
      - 정보 수집 기능 테스트
      - 신뢰성 평가 기능 테스트
      - 정보 구조화 기능 테스트
      - _요구사항: 1.2, 2.1, 2.2_

  - [ ] 5.2 분석 에이전트 구현
    - [ ] 5.2.1 AnalysisAgent 클래스 기본 구조 작성
      - 클래스 정의 및 기본 속성 설정
      - 분석 엔진 초기화
      - _요구사항: 1.2, 2.1, 2.3_
    
    - [ ] 5.2.2 데이터 패턴 분석 기능 구현
      - 데이터 패턴 탐지 알고리즘
      - 통계적 분석 기능
      - _요구사항: 1.2, 2.1, 2.3_
    
    - [ ] 5.2.3 인사이트 추출 기능 구현
      - 핵심 인사이트 식별
      - 중요도 기반 우선순위 설정
      - _요구사항: 1.2, 2.1, 2.3_
    
    - [ ] 5.2.4 데이터 처리 및 분석 로직 구현
      - 수집된 데이터 전처리
      - 분석 결과 생성 및 포맷팅
      - _요구사항: 1.2, 2.1, 2.3_
    
    - [ ] 5.2.5 AnalysisAgent 테스트 작성
      - 패턴 분석 기능 테스트
      - 인사이트 추출 기능 테스트
      - 데이터 처리 로직 테스트
      - _요구사항: 1.2, 2.1, 2.3_

  - [ ] 5.3 종합 에이전트 구현
    - [ ] 5.3.1 SynthesisAgent 클래스 기본 구조 작성
      - 클래스 정의 및 기본 속성 설정
      - 종합 엔진 초기화
      - _요구사항: 1.2, 2.5_
    
    - [ ] 5.3.2 정보 통합 기능 구현
      - 다중 소스 정보 병합
      - 중복 정보 제거 및 일관성 검사
      - _요구사항: 1.2, 2.5_
    
    - [ ] 5.3.3 요약 기능 구현
      - 핵심 내용 추출 및 요약
      - 구조화된 요약 생성
      - _요구사항: 1.2, 2.5_
    
    - [ ] 5.3.4 사용자 친화적 결과 변환 기능 구현
      - 마크다운 형식 변환
      - 가독성 향상 포맷팅
      - _요구사항: 1.2, 2.5_
    
    - [ ] 5.3.5 SynthesisAgent 테스트 작성
      - 정보 통합 기능 테스트
      - 요약 기능 테스트
      - 결과 변환 기능 테스트
      - _요구사항: 1.2, 2.5_

  - [ ] 5.4 검증 에이전트 구현
    - [ ] 5.4.1 ValidationAgent 클래스 기본 구조 작성
      - 클래스 정의 및 기본 속성 설정
      - 검증 엔진 초기화
      - _요구사항: 1.2, 2.3_
    
    - [ ] 5.4.2 팩트 체킹 기능 구현
      - 사실 확인 로직
      - 외부 소스와의 교차 검증
      - _요구사항: 1.2, 2.3_
    
    - [ ] 5.4.3 논리적 일관성 검사 기능 구현
      - 논리적 모순 탐지
      - 일관성 점수 계산
      - _요구사항: 1.2, 2.3_
    
    - [ ] 5.4.4 품질 평가 및 개선 제안 기능 구현
      - 콘텐츠 품질 평가 메트릭
      - 개선 제안 생성
      - _요구사항: 1.2, 2.3_
    
    - [ ] 5.4.5 ValidationAgent 테스트 작성
      - 팩트 체킹 기능 테스트
      - 일관성 검사 기능 테스트
      - 품질 평가 기능 테스트
      - _요구사항: 1.2, 2.3_

- [ ] 6. LangGraph 워크플로우 구현
  - [ ] 6.1 워크플로우 그래프 정의
    - StateGraph를 사용한 연구 프로세스 플로우 구성
    - 에이전트 간 상태 전환 및 조건부 라우팅 구현
    - _요구사항: 3.1, 3.2_

  - [ ] 6.2 오케스트레이터 구현
    - LangGraphOrchestrator 클래스 작성
    - 워크플로우 실행 및 에이전트 조정 기능
    - 에러 처리 및 복구 메커니즘 구현
    - _요구사항: 1.1, 1.3, 3.3_

  - [ ] 6.3 에이전트 협력 패턴 구현
    - 순차적 처리 및 병렬 처리 로직
    - 피드백 루프 및 동적 라우팅 기능
    - _요구사항: 1.3, 1.4_

- [ ] 7. Streamlit 인터페이스 구현
  - [ ] 7.1 기본 Streamlit 앱 구조 설정
    - StreamlitApp 클래스 작성
    - 기본 페이지 레이아웃 및 컴포넌트 구성
    - 사용자 입력 처리 및 결과 표시 기능
    - _요구사항: 6.1, 6.2_

  - [ ] 7.2 대화형 인터페이스 구현
    - 텍스트 입력 필드 및 제출 버튼 구현
    - 대화 히스토리 표시 기능
    - 실시간 진행 상황 표시 (progress bar, spinner)
    - _요구사항: 4.1, 4.2, 6.3_

  - [ ] 7.3 연구 결과 표시 기능 구현
    - 마크다운 형식으로 연구 결과 표시
    - 소스 링크 및 신뢰도 표시
    - 구조화된 결과 표시 (섹션별 구분)
    - _요구사항: 2.5, 6.4_

- [ ] 8. 오류 처리 및 복구 메커니즘 구현
  - [ ] 8.1 에이전트 레벨 오류 처리
    - 타임아웃 처리 및 재시도 메커니즘
    - 우아한 실패 처리 (부분 결과 제공)
    - _요구사항: 3.3_

  - [ ] 8.2 시스템 레벨 오류 처리
    - 상태 복구 및 부분 결과 활용
    - 사용자 친화적 오류 메시지 제공
    - Streamlit을 통한 오류 상황 표시
    - _요구사항: 3.3, 4.4_

- [ ] 9. 통합 및 테스트
  - [ ] 9.1 단위 테스트 작성
    - 각 에이전트별 개별 기능 테스트
    - 데이터 모델 및 유틸리티 함수 테스트
    - Tavily API 연동 테스트
    - _요구사항: 1.2, 2.3_

  - [ ] 9.2 통합 테스트 작성
    - 전체 워크플로우 통합 테스트
    - 에이전트 간 협력 및 통신 테스트
    - Streamlit 인터페이스 통합 테스트
    - _요구사항: 1.3, 3.4_

  - [ ] 9.3 시나리오 테스트 작성
    - 단순 사실 질문 테스트
    - 복잡한 분석 질문 테스트
    - 다중 도메인 질문 테스트
    - _요구사항: 2.1, 2.4, 2.5_

- [ ] 10. 성능 최적화 및 확장성 구현
  - [ ] 10.1 응답 스트리밍 구현
    - Streamlit을 통한 실시간 결과 스트리밍
    - 진행 상황 실시간 업데이트
    - _요구사항: 4.2_

  - [ ] 10.2 에이전트 플러그인 시스템 구현
    - 동적 에이전트 로딩 및 등록 기능
    - 설정 기반 에이전트 구성 시스템
    - _요구사항: 5.1, 5.2_

  - [ ] 10.3 메모리 및 성능 최적화
    - 대화 컨텍스트 크기 제한으로 메모리 최적화
    - 병렬 처리 최적화
    - 응답 시간 모니터링
    - _요구사항: 2.4_

- [ ] 11. 모니터링 및 로깅 구현
  - [ ] 11.1 LangSmith 통합
    - LangSmith를 통한 에이전트 활동 추적
    - 워크플로우 실행 모니터링
    - 성능 메트릭 수집
    - _요구사항: 7.1, 7.2_

  - [ ] 11.2 로깅 시스템 구현
    - 구조화된 로그 기록 시스템
    - 오류 추적 및 디버깅 정보 수집
    - 로그 레벨별 관리 (DEBUG, INFO, WARNING, ERROR)
    - _요구사항: 7.3, 7.4_

- [ ] 12. 문서화 및 배포 준비
  - [ ] 12.1 사용자 가이드 작성
    - 애플리케이션 사용법 문서화
    - 환경 설정 가이드
    - 예제 질문 및 사용 시나리오
    - _요구사항: 5.1, 5.2_

  - [ ] 12.2 개발자 문서 작성
    - 코드 구조 및 아키텍처 문서화
    - 새로운 에이전트 추가 방법 가이드
    - API 참조 문서
    - _요구사항: 5.1, 5.2_

- [ ] 13. 최종 검증 및 테스트
  - [ ] 13.1 E2E 테스트 구현
    - 사용자 질문 입력부터 결과 표시까지 전체 플로우 테스트
    - 멀티 에이전트 협력 시나리오 테스트
    - 오류 상황 처리 테스트
    - _요구사항: 1.1, 1.3, 3.3_

  - [ ] 13.2 실제 사용 시나리오 검증
    - 다양한 주제의 연구 질문 테스트
    - 복잡한 멀티 도메인 질문 처리 검증
    - 사용자 경험 및 인터페이스 검증
    - _요구사항: 2.1, 2.4, 2.5, 6.1_

  - [ ] 13.3 성능 및 안정성 테스트
    - 장시간 실행 안정성 테스트
    - 메모리 사용량 및 응답 시간 모니터링
    - 오류 복구 및 재시도 메커니즘 검증
    - _요구사항: 3.3, 7.2_